<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paycheck Hunter V7.5</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNiAxNicgZmlsbD0nIzBkY2FmMCc+PHBhdGggZD0nTTEyLjE3IDkuNTNjMi4zMDctMi41OTIgMy4yNzgtNC42ODQgMy42NDEtNi4yMTguMjEtLjg4Ny4yMTQtMS41OC4xNi0yLjA2NWEzLjYgMy42IDAgMCAwLS4xMDgtLjU4IDEuNCAxLjQgMCAwIDAtLjA3OC0uMjE1Yy0uMDYtLjE1Ni0uMTk2LS4zMi0uNDA4LS4zMjZhLjQuNCAwIDAgMC0uMDgyIDBjLS4wNDYuMDAyLS4xMjguMDI2LS4yNTEuMDc3LS4yNS4xMDUtLjYxLjI3Ny0xLjAzNi41NDUtMS41MjguOTYzLTMuNjQgMi44MTUtNi4yNTIgNS4yMzVsLTIuMzgyIDIuMzgyYS4yNS4yNSAwIDAgMCAuMTEuNDM2bDIuMTQuNjFhLjI1LjI1IDAgMCAwIC4yMi0uMDVsMS4zNTgtMS4zNTh6bS01LjA3NCA0LjU0LTEuMzU4IDEuMzU4YS4yNS4yNSAwIDAgMS0uMDUuMjJsLjYxIDIuMTRhLjI1LjI1IDAgMCAxIC40MzYuMTFsMi4zODItMi4zODJjMi40Mi0yLjYxMiA0LjI3Mi00LjcyNCA1LjIzNS02LjI1Mi4yNjgtLjQyNi40NC0uNzg2LjU0NS0xLjAzNi4wNS0uMTIzLjA3NS0uMjA1LjA3Ny0uMjUxYS40LjQgMCAwIDEgMC0uMDgyYy0uMDA2LS4yMTItLjE3LS4zNDgtLjMyNi0uNDA4YTEuNCAxLjQgMCAwIDEtLjIxNS0uMDc4IDMuNiAzLjYgMCAwIDEtLjU4LS4xMDhjLS40ODUtLjA1NC0xLjE3OC0uMDUtMi4wNjUuMTYtMS41MzQuMzYzLTMuNjI2IDEuMzM0LTYuMjE4IDMuNjR6bS0yLjQyLTEuOTI4YTIuNSAyLjUgMCAwIDEgMy41LTMuNWwxLjYzMSAxLjYzMWExLjI0IDEuMjQgMCAwIDAgMS40MTEuMjM2bC45MS0uNDU1YTIuMiAyLjIgMCAwIDAgLjIwNy0zLjY5bC0uNzM2LS43MzZjLS40NjEtLjQ2MS0uOTU0LS44NjYtMS40Ny0xLjIyMmEuNS41IDAgMCAwLS42OS4wOzhMNi40NyA1LjQ0QTMuNDkgMy40OSAwIDAgMCA1LjQ0IDYuNDdMMi40MDIgMy40MzFhLjUuNSAwIDAgMC0uMDk4LjY5Yy4zNTYuNTE2Ljc2MSAxLjAxIDEuMjIyIDEuNDdsLjczNi43MzZhMi4yIDIuMiAwIDAgMCAzLjY5LS4yMDdsLjQ1NS0uOTFhMS4yNCAxLjI0IDAgMCAwLS4yMzYtMS40MTF6Jy8+PHBhdGggZD0nTTIuMjMyIDEwLjE1NWE0LjA4IDQuMDggMCAwIDAgMi4yNSAyLjI1bDEuMzc4LTEuMzc4YTIuNSAyLjUgMCAwIDEtMy41LTMuNXonLz48cGF0aCBkPSJNLjQ4NSAxMS4yODJBNC4xIDQuMSAwIDAgMCAyLjggMTMuNTk3YTQgNCAwIDAgMC0xLjg0NiAxLjg0NmMtLjUyNC0uNC0xLjExNC0xLjA0LTEuNjM2LTEuNzhsMj4iPjwvc3ZnPg==">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #334155 0%, #1e293b 100%);
            --primary-color: #334155;
            --text-main: #0f172a;
            --text-muted: #64748b;
        }

        body { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            background-size: 20px 20px, 100% 100%;
            background-attachment: fixed;
            font-family: 'Inter', sans-serif; 
            color: #f8fafc;
            padding-bottom: 80px;
            overflow-x: hidden; 
        }

        .card-custom, .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            color: var(--text-main);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 32px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .text-success { color: #166534 !important; } 
        .bg-success { background: #166534 !important; color: #ffffff !important; border: none !important; }
        .bg-success-subtle { background-color: #d1fae5 !important; color: #065f46 !important; }
        .border-success { border-color: #166534 !important; }
        .border-success-subtle { border-color: #a7f3d0 !important; }

        .btn-outline-dark, .btn-light.text-dark { border-color: #0f172a !important; color: #0f172a !important; }
        .btn-outline-dark:hover { background-color: #0f172a !important; color: #ffffff !important; }

        .rocket-icon {
            background: linear-gradient(180deg, #94a3b8 0%, #64748b 40%, #475569 50%, #334155 60%, #0f172a 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            display: inline-block;
        }

        .spotlight { background: radial-gradient(circle, rgba(226, 232, 240, 0.6) 0%, rgba(255, 255, 255, 0) 70%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-15px); } }
        .animate-float { animation: float 4s ease-in-out infinite; }

        .login-input { background-color: rgba(241, 245, 249, 0.8); letter-spacing: 3px; border: 2px solid transparent; border-radius: 12px; }
        .form-control, .form-select { border-radius: 12px; border: 1px solid #e2e8f0; font-size: 0.95rem; color: var(--text-main); }
        .btn-gradient { background: var(--primary-gradient); color: white; border: none; font-weight: 700; transition: transform 0.2s; }
        .brand-text { background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; }
        label { font-weight: 700; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }

        .nav-tabs { border-bottom: 2px solid #e2e8f0; position: relative; z-index: 10; }
        .nav-tabs .nav-link { color: #64748b; font-weight: 700; border: none; padding: 15px 10px; border-radius: 0; cursor: pointer; }
        .nav-tabs .nav-link.active { color: #1e293b; border-bottom: 3px solid #1e293b; background: transparent; }

        .swal2-popup { font-size: 0.85rem !important; border-radius: 20px !important; width: 90% !important; max-width: 400px !important; }
        #loginScreen.d-none { display: none !important; }

        /* --- CSS RESPONSIVO LOGIN --- */
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            color: var(--text-main);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 32px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 420px;
            padding: 2rem !important; 
        }
        @media (max-width: 576px) { 
            .login-card { padding: 1.5rem !important; }
        }
    </style>
</head>
<body>

    <div id="loginScreen" class="w-100" style="position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: 9999; overflow-y: auto;">
        <div class="d-flex flex-column align-items-center justify-content-center h-100 px-3 py-2">
            <div class="mb-3 text-center">
                <a href="https://tanyateclab.com" target="_blank" rel="noopener noreferrer">
                    <img src="img/TanyaTec-Lab-removebg.png" alt="TanyaTec Lab" style="height: 90px; max-width: 100%; filter: drop-shadow(0px 4px 10px rgba(0,0,0,0.4));">
                </a>
            </div>
            <div class="card login-card shadow-lg border-0 text-center w-100">
                <div class="mb-0"><span class="brand-text fw-bold fs-4">Paycheck Hunter</span></div>
                <div class="mt-2 mb-2 animate-float" style="filter: drop-shadow(0px 12px 16px rgba(15, 23, 42, 0.4));">
                    <div class="spotlight" style="width: 65px; height: 65px;">
                        <i class="bi bi-rocket-takeoff-fill rocket-icon" style="font-size: 2.2rem;"></i>
                    </div>
                </div>
                <h3 class="fw-bold text-dark mb-0 fs-5">Bienvenida, Closer.</h3>
                <p class="text-muted small mb-3">Ingresa tu credencial de acceso</p>
                <div class="mb-3">
                    <label for="txtPassword" class="d-block text-center text-uppercase fw-bold mb-1" style="color: #94a3b8; font-size: 0.7rem; letter-spacing: 1px;">Contrase√±a Maestra</label>
                    <input type="password" id="txtPassword" class="form-control login-input text-center fw-bold fs-5 shadow-sm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="height: 50px; color: var(--text-main);">
                </div>
                <button onclick="login()" class="btn btn-gradient w-100 py-2 rounded-pill fw-bold shadow d-flex align-items-center justify-content-center gap-2" style="font-size: 0.95rem; letter-spacing: 1px; transition: transform 0.2s ease, box-shadow 0.2s ease;">
                    ENTRAR <i class="bi bi-arrow-right-circle-fill fs-5"></i>
                </button>
                <div id="loginError" class="d-none mt-2">
                    <p class="text-danger fw-bold bg-danger-subtle p-2 rounded small mb-0 border border-danger-subtle d-flex align-items-center justify-content-center gap-1">
                        <i class="bi bi-exclamation-triangle-fill"></i> Credencial incorrecta
                    </p>
                </div>
            </div>
            <div class="mt-3 text-center" style="opacity: 0.6;">
                <small class="text-white fw-bold" style="letter-spacing: 1px; font-size: 0.65rem;">
                    &copy; 2026 <a href="https://tanyateclab.com" target="_blank" rel="noopener noreferrer" class="text-white text-decoration-none">TANYATEC LAB</a>. ALL RIGHTS RESERVED.
                </small>
            </div>
        </div>
    </div>
    <div id="appContent" class="container py-4 d-none">
        
        <div class="d-flex justify-content-between align-items-center mb-4 mt-2">
            
            <div class="d-flex align-items-center">
                <i class="bi bi-rocket-takeoff-fill text-info me-2 me-md-3" style="font-size: 1.9rem; line-height: 1;"></i>
                <div>
                    <h1 class="fw-bold text-white mb-0" style="line-height: 1.1; font-size: 1.6rem;">Paycheck Hunter</h1>
                    <p class="text-white-50 mb-0 mt-1" style="font-size: 0.85rem; letter-spacing: 0.5px;">Gesti√≥n de Comisiones</p>
                </div>
            </div>
            
            <div class="d-flex flex-column align-items-end justify-content-center gap-2">
                <a href="https://tanyateclab.com" target="_blank" rel="noopener noreferrer" class="d-none d-md-block text-decoration-none" title="Visitar TanyaTec Lab">
                    <img src="img/TanyaTec-Lab-removebg.png" alt="TanyaTec Lab" style="height: 75px; filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.3)); transition: transform 0.2s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                </a>
                <button onclick="cerrarSesion()" class="btn btn-outline-light rounded-pill px-3 px-md-4 py-1 shadow-sm d-flex align-items-center" title="Salir">
                    <i class="bi bi-power fs-5" style="transform: scale(1.1);"></i>
                    <span class="d-none d-md-inline ms-2 fw-bold">Salir</span>
                </button>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card card-custom p-3 p-md-4">
                    <ul class="nav nav-tabs mb-4 w-100 d-flex flex-nowrap">
                        <li class="nav-item flex-fill"><button type="button" class="nav-link w-100 active" id="nav-ventas" onclick="switchTab('ventas')">üìà Ventas</button></li>
                        <li class="nav-item flex-fill"><button type="button" class="nav-link w-100" id="nav-maquila" onclick="switchTab('maquila')">üìù Paperwork</button></li>
                    </ul>

                    <div id="tabVentas">
                        <form id="frmVenta" onsubmit="return false;">
                            <div class="row g-3 mb-3 bg-light p-3 rounded mx-0 border border-primary-subtle">
                                <div class="col-md-2 col-6"><label class="form-label text-primary fw-bold"># Vendedores</label><select class="form-select border-primary" id="cmbNumVendedores" onchange="renderVendedoresInputs()"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></div>
                                <div class="col-md-5 col-12" id="containerVendedores"><label class="form-label text-muted small">Nombre Vendedor 1</label><input type="text" class="form-control mb-2 form-control-sm" id="vend_1" placeholder="Nombre..."></div>
                                <div class="col-md-5 col-12">
                                    <div class="d-flex gap-3 flex-wrap align-items-start mt-2 mt-md-4">
                                        <div class="flex-grow-1"><div class="form-check bg-white border p-2 rounded"><input class="form-check-input" type="checkbox" id="chkLiner" onchange="toggleLiner()"><label class="form-check-label fw-bold text-dark small">Liner (-3.5%)</label></div><input type="text" class="form-control form-control-sm mt-1 d-none" id="txtLinerName" placeholder="Nombre Liner"></div>
                                        <div class="flex-grow-1">
                                            <div class="form-check bg-white border p-2 rounded">
                                                <input class="form-check-input" type="checkbox" id="chkCasado" onchange="toggleCasado()">
                                                <label class="form-check-label fw-bold text-dark small">Casado</label>
                                            </div>
                                            <div id="divCasadoOptions" class="d-none mt-2 p-2 bg-white border rounded shadow-sm">
                                                <input type="text" class="form-control form-control-sm mb-2" id="txtCasadoName" placeholder="Nombre Casado">
                                                <select class="form-select form-select-sm border-secondary text-dark fw-bold" id="cmbTipoCasado" onchange="calcularMatematica()">
                                                    <option value="Comisi√≥n">1. S√≥lo Comisi√≥n</option>
                                                    <option value="Volumen">2. S√≥lo Volumen</option>
                                                    <option value="Ambas">3. Ambas (Comisi√≥n + Volumen)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-3 mb-3">
                                <div class="col-md-2 col-6"><label class="form-label">Fecha</label><input type="date" class="form-control" id="txtFecha" required></div>
                                <div class="col-md-2 col-6"><label class="form-label">Contrato</label><input type="text" class="form-control fw-bold" id="txtContrato" required></div>
                                <div class="col-md-4 col-12"><label class="form-label">Cliente</label><input type="text" class="form-control" id="txtCliente" required>
                                    <div class="d-flex gap-4 mt-2 align-items-center"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nacionalidad" id="nacExtranjero" value="Extranjero" checked><label class="form-check-label small text-dark">Extranjero</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nacionalidad" id="nacMexicano" value="Mexicano"><label class="form-check-label small text-dark">Mexicano</label></div></div>
                                </div>
                                <div class="col-md-4 col-12"><label class="form-label text-dark">Socio</label><div class="d-flex gap-3 mt-1"><div class="form-check"><input class="form-check-input" type="radio" name="tipoSocio" id="radioNew" value="New" checked onchange="calcularMatematica()"><label class="form-check-label text-dark">New (9%)</label></div><div class="form-check"><input class="form-check-input" type="radio" name="tipoSocio" id="radioUpgrade" value="Upgrade" onchange="calcularMatematica()"><label class="form-check-label text-dark">Upgrade (8%)</label></div></div></div>
                            </div>
                            <div class="row g-3 mb-3">
                                <div class="col-md-3 col-12"><label class="form-label">Monto Venta (USD)</label><div class="input-group"><span class="input-group-text bg-light text-muted border-secondary-subtle">$</span><input type="number" class="form-control fw-bold text-dark fs-5 border-secondary-subtle" id="txtMonto" required oninput="calcularMatematica()"></div></div>
                                <div class="col-md-3 col-12"><label class="form-label text-primary fw-bold" style="font-size: 0.7rem;">Importe Base (-13.79%)</label><div class="input-group"><span class="input-group-text bg-primary-subtle text-primary">$</span><input type="text" class="form-control bg-white fw-bold text-primary" id="txtImporteBase" readonly></div></div>
                                <div class="col-md-3 col-6"><label class="form-label">Status</label><select class="form-select" id="cmbStatus" onchange="togglePendiente('venta')"><option value="Cerrada">‚úÖ Cerrada</option><option value="Pendiente">‚è≥ Pendiente</option><option value="Ca√≠da">‚ùå Ca√≠da</option></select><div id="divFechaPendienteVenta" class="d-none mt-2"><input type="date" class="form-control form-control-sm" id="txtFechaPendienteVenta"></div></div>
                                <div class="col-md-3 col-6"><label class="form-label">Pack</label><select class="form-select" id="cmbPack" onchange="calcularMatematica()"><option value="None">None</option><option value="Full">Full</option><option value="1/2">1/2</option><option value="1/3">1/3</option><option value="1/4">1/4</option></select></div>
                            </div>
                            <div class="row g-3 mb-3 mx-0"><div class="col-12"><div class="bg-light p-2 rounded border d-flex flex-wrap gap-3 align-items-center px-3"><span class="text-muted small fw-bold">OPCIONES:</span><div class="form-check form-switch"><input class="form-check-input" type="checkbox" role="switch" id="chkAmex" onchange="calcularMatematica()"><label class="form-check-label fw-bold text-primary" for="chkAmex">AMEX</label></div><div class="form-check form-switch"><input class="form-check-input" type="checkbox" role="switch" id="chkMSI" onchange="calcularMatematica()"><label class="form-check-label fw-bold text-info" for="chkMSI">6MSI (-1.5%)</label></div></div></div></div>
                            <div class="row g-2 mb-4 bg-light p-3 rounded mx-0 border border-danger-subtle">
                                <div class="col-12 mb-2"><span class="text-danger fw-bold small text-uppercase"><i class="bi bi-dash-circle me-1"></i>Deducciones</span></div>
                                <div class="col-6 col-md"><div class="form-check bg-white border p-2 rounded"><input class="form-check-input" type="checkbox" id="chkReserva" onchange="calcularMatematica()"><label class="form-check-label text-dark small fw-bold">Reserva (-10%)</label></div></div>
                                <div class="col-6 col-md"><label class="form-label text-muted small fw-bold">Impuestos %</label><input type="number" class="form-control form-control-sm border-danger" id="txtImpuestosPorcentaje" oninput="calcularMatematica()"></div>
                                <div class="col-6 col-md"><label class="form-label text-muted small">Regalos ($)</label><input type="number" class="form-control form-control-sm" id="txtRegalos" oninput="calcularMatematica()"></div>
                                <div class="col-6 col-md"><label class="form-label text-muted small">Donativos ($)</label><input type="number" class="form-control form-control-sm" id="txtDonativos" oninput="calcularMatematica()"></div>
                                <div class="col-6 col-md"><label class="form-label text-muted small">Move In ($)</label><input type="number" class="form-control form-control-sm" id="txtMoveIn" oninput="calcularMatematica()"></div>
                                <div class="col-6 col-md"><label class="form-label text-success fw-bold small">Bonus Wk</label><select class="form-select form-select-sm border-success text-success fw-bold" id="cmbBonusWeeks" onchange="calcularMatematica()"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></div>
                            </div>
                            <div class="row g-3 mb-3 mx-0">
                                <div class="col-12 d-flex flex-wrap gap-3">
                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="chkMeseros" checked disabled><label class="form-check-label text-dark fw-bold small">Meseros <span class="badge bg-light text-dark border ms-1">-$20</span></label></div>
                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="chkAntilavado" onchange="calcularMatematica()"><label class="form-check-label text-dark small">Antilavado <span class="badge bg-light text-dark border ms-1">-$10</span></label></div>
                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="chkExploreForm" onchange="calcularMatematica()"><label class="form-check-label text-dark small">Explore Form <span class="badge bg-light text-dark border ms-1">-$10</span></label></div>
                                </div>
                            </div>
                            <div class="row g-3 mb-4 mx-0 justify-content-center justify-content-md-end">
                                <div class="col-md-6 px-0">
                                    <div class="p-3 bg-white border border-success-subtle rounded shadow-sm text-center">
                                        <label class="small fw-bold text-uppercase mb-2 d-block text-muted">Pago Neto Final (Por Persona)</label>
                                        <div class="d-flex align-items-center justify-content-center text-success"><span class="fs-1 fw-bold me-1">$</span><input type="text" class="form-control-plaintext fw-bold text-success text-center p-0 fs-1" id="txtPagoTotal" readonly style="width: auto;" value="0.00"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-3 mb-4">
                                <div class="col-md-4 col-12"><div class="form-check mt-1"><input class="form-check-input" type="checkbox" id="chkExplore" onchange="toggleExplore()"><label class="form-check-label fw-bold text-primary">¬øExplore Package?</label></div><div id="exploreFields" class="d-none bg-info-subtle p-2 rounded mt-2"><div class="d-flex flex-wrap align-items-end gap-2"><div class="flex-grow-1"><label class="small">Fecha Promesa</label><input type="date" class="form-control form-control-sm" id="txtFechaPromesa"></div><div class="form-check mb-1"><input class="form-check-input" type="checkbox" id="chkExploreHoy" onchange="toggleExploreHoy()"><label class="form-check-label small fw-bold">Hoy</label></div></div></div></div>
                                <div class="col-md-8 col-12"><label class="form-label text-muted small fw-bold">Comentarios</label><textarea class="form-control" id="txtComentarios" rows="2"></textarea></div>
                            </div>
                            <div class="mt-2 pb-2 d-grid gap-2 d-md-flex justify-content-md-end">
                                <button id="btnCancelarEditVenta" onclick="cancelarEdicion('ventas')" class="btn btn-light border-0 text-danger px-4 py-2 rounded-pill fw-bold shadow-sm d-none">CANCELAR</button>
                                <button id="btnGuardarVenta" onclick="guardarVenta()" class="btn-gradient px-5 py-2 rounded-pill fw-bold shadow d-flex align-items-center justify-content-center gap-2">GUARDAR VENTA</button>
                            </div>
                        </form>
                    </div>

                    <div id="tabMaquila" class="d-none">
                        <form id="frmMaquila" onsubmit="return false;">
                            <div class="alert bg-success-subtle text-success border-0 shadow-sm mb-4 fw-bold">Registrando Paperwork</div>
                            <div class="row g-3 mb-3"><div class="col-md-3 col-6"><label class="form-label">Fecha</label><input type="date" class="form-control" id="maqFecha" required></div><div class="col-md-3 col-6"><label class="form-label">Contrato</label><input type="text" class="form-control fw-bold" id="maqContrato" required></div><div class="col-md-6 col-12"><label class="form-label">Nombre del Socio</label><input type="text" class="form-control" id="maqSocio" required></div></div>
                            <div class="row g-3 mb-3"><div class="col-md-6 col-12"><label class="form-label">Vendedores</label><input type="text" class="form-control" id="maqVendedores"></div><div class="col-md-3 col-6"><label class="form-label">Status</label><select class="form-select" id="maqStatus" onchange="togglePendiente('maquila')"><option value="Cerrada">‚úÖ Cerrada</option><option value="Pendiente">‚è≥ Pendiente</option><option value="Cancelada">üö´ Cancelada</option></select><div id="divFechaPendienteMaq" class="d-none mt-2"><input type="date" class="form-control form-control-sm" id="txtFechaPendienteMaq"></div></div><div class="col-md-3 col-6"><label class="form-label">Pack</label><select class="form-select" id="maqPack"><option value="None" selected>None</option><option value="Full">Full</option><option value="1/2">1/2</option></select></div></div>
                            <div class="row g-3 mb-4"><div class="col-md-4 col-12"><label class="form-label text-success fw-bold">Pago Total</label><div class="input-group"><span class="input-group-text bg-success-subtle text-success border-success-subtle">$</span><input type="number" class="form-control border-success-subtle text-success fw-bold" id="maqPago" required></div></div></div>
                            <div class="mt-4 pb-2 d-grid gap-2 d-md-flex justify-content-md-end">
                                <button id="btnCancelarEditMaquila" onclick="cancelarEdicion('maquila')" class="btn btn-light border-0 text-danger px-4 py-2 rounded-pill fw-bold shadow-sm d-none">CANCELAR</button>
                                <button id="btnGuardarMaquila" onclick="guardarMaquila()" class="btn btn-secondary px-5 py-2 rounded-pill fw-bold shadow d-flex align-items-center justify-content-center gap-2" style="background: linear-gradient(135deg, #166534 0%, #14532d 100%); border:none;">GUARDAR PAPERWORK</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card p-3 p-md-4 border border-success-subtle shadow-lg" style="background: #ffffff; border-radius: 24px; color: #0f172a;">
                    <div class="row align-items-stretch">
                        <div class="col-md-7 mb-4 mb-md-0 border-md-end border-light-subtle d-md-flex flex-md-column py-md-2">
                            <h6 class="fw-bold mb-3 mb-md-0 text-dark text-uppercase"><i class="bi bi-graph-up-arrow me-2 text-primary"></i>Reporte Financiero</h6>
                            <div class="d-flex gap-2 flex-wrap flex-md-nowrap align-items-center my-md-auto py-md-3">
                                <input type="date" class="form-control form-control-sm" id="filtroInicio">
                                <input type="date" class="form-control form-control-sm" id="filtroFin">
                                <div class="d-flex gap-2 w-100 w-md-auto">
                                    <button class="btn btn-sm btn-dark flex-grow-1 px-3 fw-bold" onclick="aplicarFiltro()">Calcular</button>
                                    <button class="btn btn-sm btn-outline-secondary px-3" onclick="limpiarFiltro()">Limpiar</button>
                                </div>
                            </div>
                            <div class="mt-3 mt-md-0 text-center text-md-start">
                                <span class="badge bg-light text-dark border px-3 py-2" id="lblRangoFechas">Selecciona fechas</span>
                            </div>
                        </div>
                        
                        <div class="col-md-5 text-center text-md-end ps-md-4 d-md-flex flex-md-column justify-content-md-center">
                            <div class="d-flex flex-column gap-2 align-items-center align-items-md-end">
                                <div>
                                    <h6 class="text-uppercase text-muted fw-bold small mb-0" style="letter-spacing: 1px;">Volumen Total</h6>
                                    <h3 class="fw-bold text-info mb-0" id="lblTotalVolumen">$0.00</h3>
                                </div>
                                <div class="border-top pt-2 w-100 d-md-none"></div>
                                <div>
                                    <h6 class="text-uppercase text-muted fw-bold small mb-0 mt-1" style="letter-spacing: 1px;">Comisi√≥n Total</h6>
                                    <h2 class="fw-bold text-success mb-0" id="lblTotalCobrar">$0.00</h2>
                                </div>
                                <div class="border-top pt-2 w-100 d-md-none"></div>
                                <div>
                                    <h6 class="text-uppercase text-muted fw-bold small mb-0 mt-1" style="letter-spacing: 1px;">Bono Explore</h6>
                                    <h4 class="fw-bold text-primary mb-0" id="lblTotalExplore">$0.00</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="card card-custom p-3 p-md-4">
                    
                    <div class="row mb-3 align-items-center border-bottom pb-3">
                        <div class="col-md-5 col-12 mb-2 mb-md-0">
                            <h6 class="fw-bold mb-0 text-dark text-uppercase"><i class="bi bi-search me-2 text-primary"></i>Buscador de Contratos</h6>
                        </div>
                        <div class="col-md-7 col-12">
                            <div class="input-group shadow-sm">
                                <span class="input-group-text bg-white border-end-0 text-muted"><i class="bi bi-search"></i></span>
                                <input type="text" class="form-control border-start-0 ps-0" id="txtBuscador" placeholder="Cliente, socio, # contrato o fecha..." onkeyup="buscarContrato()">
                                <button class="btn btn-light border text-danger" type="button" onclick="limpiarBuscador()" title="Limpiar"><i class="bi bi-x-circle-fill"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="w-100 overflow-hidden">
                        <table class="table table-hover align-middle mb-0 w-100">
                            <thead class="table-light">
                                <tr>
                                    <th>Fecha / Contrato</th>
                                    <th class="d-none d-md-table-cell">Detalles</th>
                                    <th class="d-none d-md-table-cell">Status</th>
                                    <th class="text-end text-md-start">Total / Acciones</th>
                                    <th class="text-end d-none d-md-table-cell">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tablaResultados"></tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top flex-wrap gap-2">
                        <small class="text-muted w-100 text-center w-md-auto text-md-start" id="pageInfo">Mostrando 0 - 0 de 0</small>
                        <div class="w-100 d-flex justify-content-center w-md-auto justify-content-md-end">
                            <button class="btn btn-sm btn-outline-secondary me-2" onclick="cambiarPagina(-1)" id="btnPrev">Anterior</button>
                            <button class="btn btn-sm btn-outline-primary" onclick="cambiarPagina(1)" id="btnNext">Siguiente</button>
                        </div>
                    </div>
                    <div id="emptyState" class="text-center py-5 d-none"><i class="bi bi-inbox text-muted display-4 opacity-25"></i><p class="text-muted mt-2 small">No hay registros.</p></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalDetalle" tabindex="-1"><div class="modal-dialog modal-dialog-centered modal-lg"><div class="modal-content"><div class="modal-header bg-light"><h5 class="modal-title fw-bold text-primary" id="modalTitulo">Detalle</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body p-4" id="modalCuerpo"></div><div class="modal-footer border-0"><button class="btn btn-secondary rounded-pill px-4" data-bs-dismiss="modal">Cerrar</button></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/app.js"></script>
    <script>
        document.getElementById('txtFecha').valueAsDate = new Date();
        document.getElementById('maqFecha').valueAsDate = new Date();
        setTimeout(() => { if(typeof renderVendedoresInputs === 'function') renderVendedoresInputs(); }, 100);
    </script>
</body>
</html>